local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local PlaceId = game.PlaceId

-- Variáveis de Estado
local aimbotLigado = false
local espLigado = false
local killAuraLigado = false
local menuVisivel = true
local alvoTravado = nil 

-- IDs DOS JOGOS
local ID_JUJUTSU = 9391468976
local ID_FPS_PASSEIO = 136801880565837
local ID_GUNFIGHT = 14518422161
local ID_STRONGEST = 10449761463 

-- Verificações de Jogo
local eJujutsu = (PlaceId == ID_JUJUTSU)
local eFlick = (PlaceId == ID_FPS_PASSEIO)
local eGunfight = (PlaceId == ID_GUNFIGHT)
local eStrongest = (PlaceId == ID_STRONGEST)

-- ==========================================
-- INTERFACE
-- ==========================================
local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
screenGui.Name = "YelzyHub_V26"
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 230, 0, 200)
mainFrame.Position = UDim2.new(0.1, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

local corner = Instance.new("UICorner", mainFrame)
local stroke = Instance.new("UIStroke", mainFrame)
stroke.Color = Color3.fromRGB(200, 0, 0)
stroke.Thickness = 2

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 40)
title.TextColor3 = Color3.new(1, 1, 1)
title.BackgroundTransparency = 1
title.Font = Enum.Font.SourceSansBold
title.TextSize = 15

-- Títulos Automáticos
if eGunfight then title.Text = "Yelzy Hub - Gunfight Arena"
elseif eFlick then title.Text = "Yelzy Hub - FPS Passeio"
elseif eJujutsu then title.Text = "Yelzy Hub - Jujutsu Shenanigans"
elseif eStrongest then title.Text = "Yelzy Hub - The Strongest Battlegrounds"
else title.Text = "Yelzy Hub - Multijogos" end

local container = Instance.new("Frame", mainFrame)
container.Size = UDim2.new(1, 0, 1, -40)
container.Position = UDim2.new(0, 0, 0, 40)
container.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", container)
layout.Padding = UDim.new(0, 8)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function criarBotao(nome)
    local btn = Instance.new("TextButton", container)
    btn.Size = UDim2.new(0.9, 0, 0, 40)
    btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    btn.Text = nome
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 14
    Instance.new("UICorner", btn)
    local s = Instance.new("UIStroke", btn)
    s.Thickness = 0
    s.Color = Color3.fromRGB(0, 255, 0)
    return btn, s
end

local btnAim, sAim = criarBotao("Aimbot Punch and skill")
local btnEsp, sEsp = criarBotao("Esp Players")

local btnKill, sKill
if eJujutsu or eStrongest then
    btnKill, sKill = criarBotao("Tp To Player atack (kill aura)")
end

local function atualizarBotao(btn, s, cond)
    s.Thickness = cond and 2 or 0
    btn.BackgroundColor3 = cond and Color3.fromRGB(60, 0, 0) or Color3.fromRGB(30, 30, 30)
end

-- ==========================================
-- LÓGICA DE TEAM CHECK (APENAS GUNFIGHT ARENA)
-- ==========================================

local function ehAlvoValido(p)
    -- Se estiver no Gunfight Arena, ativa o Team Check
    if eGunfight then
        if p.Team ~= nil and LocalPlayer.Team ~= nil then
            return p.Team ~= LocalPlayer.Team
        end
    end
    -- Nos outros jogos, mira em qualquer um
    return true 
end

local function obterAlvo()
    if alvoTravado and alvoTravado:FindFirstChild("Humanoid") and alvoTravado.Humanoid.Health > 0 then
        local pAlvo = Players:GetPlayerFromCharacter(alvoTravado)
        if pAlvo and ehAlvoValido(pAlvo) then
            return alvoTravado
        end
    end

    local alvo, menorDist = nil, math.huge
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            if p.Character.Humanoid.Health > 0 and ehAlvoValido(p) then
                local dist = (LocalPlayer.Character.HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Magnitude
                if dist < menorDist then
                    menorDist = dist
                    alvo = p.Character
                end
            end
        end
    end
    alvoTravado = alvo
    return alvo
end

-- ==========================================
-- EXECUÇÃO
-- ==========================================

RunService.RenderStepped:Connect(function()
    if espLigado then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and ehAlvoValido(p) then
                local h = p.Character:FindFirstChild("YelzyESP") or Instance.new("Highlight", p.Character)
                h.Name = "YelzyESP"
                h.FillColor = Color3.new(1, 0, 0)
                h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
            end
        end
    end

    if aimbotLigado then
        local alvo = obterAlvo()
        if alvo and alvo:FindFirstChild("HumanoidRootPart") then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, alvo.HumanoidRootPart.Position)
            
            if eFlick or eGunfight then
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                task.wait(0.02)
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
            end
        end
    else
        alvoTravado = nil
    end
end)

-- Kill Aura (Jujutsu/Strongest)
task.spawn(function()
    while true do
        task.wait()
        if killAuraLigado and (eJujutsu or eStrongest) then
            local alvo = obterAlvo()
            if alvo and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = alvo.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                task.wait(0.01)
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
            end
        end
    end
end)

-- Botão Minimizar
local yBtn = Instance.new("TextButton", screenGui)
yBtn.Size = UDim2.new(0, 45, 0, 45)
yBtn.Position = UDim2.new(0, 10, 0, 10)
yBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
yBtn.Text = "Y"
yBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", yBtn).CornerRadius = UDim.new(1, 0)

yBtn.MouseButton1Click:Connect(function()
    menuVisivel = not menuVisivel
    mainFrame.Visible = menuVisivel
end)

btnAim.MouseButton1Click:Connect(function() aimbotLigado = not aimbotLigado atualizarBotao(btnAim, sAim, aimbotLigado) end)
btnEsp.MouseButton1Click:Connect(function() 
    espLigado = not espLigado 
    atualizarBotao(btnEsp, sEsp, espLigado) 
    if not espLigado then
        for _, p in pairs(Players:GetPlayers()) do
            if p.Character and p.Character:FindFirstChild("YelzyESP") then p.Character.YelzyESP:Destroy() end
        end
    end
end)
if btnKill then
    btnKill.MouseButton1Click:Connect(function() 
        killAuraLigado = not killAuraLigado 
        atualizarBotao(btnKill, sKill, killAuraLigado)
        if killAuraLigado then aimbotLigado = true atualizarBotao(btnAim, sAim, true) end
    end)
end
